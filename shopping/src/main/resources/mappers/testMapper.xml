<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="yjc.wdb.mapper.testMapper">
	<!-- <select id="search" resultType="Product">
		select * from product where product_no > 0
		and category_no = (select category_no from category where category_small = #{keyword}) 
		or product_name like CONCAT('%', #{keyword}, '%')
		order by product_name;
	</select> -->
	<select id="search" resultType="Product">
		select * from product where product_no > 0
		and product_name like CONCAT('%', #{keyword}, '%')
		order by product_name;
	</select>
	
	<select id="login" resultType="Member">
		select * from member where member_id = #{member_id} and member_pw = #{member_pw}
	</select>
	
	<select id="wlist" resultType="WishDTO">
		select  wishList_no, a.wishList_date, b.product_no, b.product_name from wishlist a, product b
		where a.member_no = #{mem_no} and a.product_no = b.product_no order by a.wishList_date desc
	</select>
	<insert id="insertW">
		insert into wishlist(member_no, product_no) values (#{member_no}, #{product_no})
	</insert>
	<insert id="insertB">
		insert into product(product_name) values (#{keyval})
	</insert>
	<select id="selectPL" resultType="WishDTO">
		select * from product where product_name = #{keyval}
	</select>
	<select id="makList" resultType="MakDTO">	
		select * from shop_product t1
			inner join shop t2 ON t1.shop_no = t2.shop_no 
 			inner join product t3 ON t3.product_no = t1.product_no
 			where t3.product_no = #{product_no}
	
	</select>
	
	<select id="shopList" resultType="MakDTO">
		select a.shop_no, a.product_no, b.shop_gps_longitude, b.shop_gps_latitude from shop_product a
		inner join shop b
 		on a.shop_no = b.shop_no
	</select>

	<delete id="deleteW">
		delete from wishlist where wishList_no = #{wish_no} and member_no = #{mem_no}
	</delete>
	
	<select id="getM" resultType="Member">
		select * from member where member_no = #{mem_no}
	</select>
</mapper>